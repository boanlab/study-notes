# 정규화
## 이상(anomaly)
- 이상의 종류
    - 삭제이상 : 튜플을 삭제할 때 `연쇄적으로 삭제` 되어 정보 손실이 발생하는 현상
    - 삽입이상 : 데이터를 삽입 할때 `원하지 않는 정보도` 삽입 되거나, 삽입 해야하는 현상
    - 갱신이상 : 중복 데이터의 경우 일부 정보만 갱신되어 `정보의 모순성`이 발생하는 현상
- 이상의 원인 : 하나의 개체에 속한 속성들 간에 종속관계가 하나의 릴레이션으로 표현되기 때문
- 해결책 : 속성간의 종속관계를 분해하여 `각각의 종속성 마다 하나의 릴레이션`으로 표현하는것 = `정규화` 과정
---
## 함수 종속
- 정의
    - 릴레이션 R에서 X와 Y가 각각 R의 속성에 부분집합 때 각각의 `X의 값에 따라 하나의 Y값만 연관`된다면 Y를 X에 함수종속이라고 함 : X→Y로 표현됨
        - ex) X=학번, Y= 이름, 나이 일때 학번에 따라 이름과 나이를 식별 할 수 있으므로 X→Y
    - 이 때 X를 `결정자`, Y를 `종속자` 라고 함
    - X 나Y는 각각 한개 이상의 요소를 가질 수 있음
    - X 가 후보키라면 모든 속성 Y에 대해 X→Y 성립
    - X 가 반드시 유일성을 만족할 필요는 없음
- 완전 함수 종속 : 종속자가 `기본키`에만 종속되며, 기본키가 여러속성으로 되어있을 경우 종속자가 `기본키에 일부에 종속되어있지 않은경우`
    - ex) 결정자=사원번호 + 부서번호, 종속자=사원이름 인 경우 사원이름은 사원번호와 부서번호 둘다 알아야 결정 되므로 완전 종속
- 부분 함수 종속 : 종속자가 `기본키가 아닌 속성`에 종속되어 있거나, 기본키가 여러 속성으로 되어있을 경우 `기본키에 일부에도 종속되어 있는 경우`
    - ex) 결정자 = 사원번호 + 부서번호, 종속자 = 부서이름 인 경우 부서이름은 부서번호에도 종속되어 있으므로 부분 함수 종속
- 이행적 함수 종속 : A→C일때, A→B이고 B→C이면 C를 A에 이행적 함수종속이라 한다.
- 함수 종속에 대한 추론 규칙
    - 재귀 규칙 : Y가 X의 부분 집합이면 X → Y 이다.
    - 증가 규칙 : X → Y 이면 WX → WY 이고 WX → Y 이다.
    - 이행 규칙 : X → Y 이고 Y → Z 이면 X → Z 이다.
    - 유니온 규칙 : X → Y 이고 X → Z 이면 X → YZ 이다.
    - 분해 규칙 : X → YZ 이면 X → Y와 X → Z 이다.
    - 가이행 규칙 : 만일 W → X 이고 XY → Z 이면 WY → Z 이다.
---
## 정규형
- 정의
    - 일련의 `조건을 만족`하는 릴레이션
    - `정규화`를 통해 정규형을 만듦
- 원칙
    1. 정보의 무손실
    2. 최소의 데이터 중복
    3. 분리의 원칙
        - 독립적인 관계는 별개의 릴레이션으로 표현
        - 릴레이션 각각에 대해 독립적 처리가 가능
- 제 1 정규형(1NF)
    - 정의 : 모든 도메인이 `원자 값`으로만 이루어진 릴레이션
    - 이상의 원인 : 기본 키에 부분 함수 종속된 속성이 존재 
        - 기본키와 무관한 속성이 존재
        - 독립적인 정보가 하나에 릴레이션에 존재
    해결법 : 프로젝션으로 1NF 릴레이션을 분해=>2NF
- 제 2 정규형(2NF)
    - 정의 : `1NF` 이면서 키에 속하지 않는 모든 속성이 기본키에 대해 `완전 함수 종속`
    - 무손실 분해 : 1NF에서 프로젝션을 통해 2NF가 되고 다시 자연 조인을 통해 1NF로 복귀 가능
    - 이상의 원인 : 이행적 함수 종속이 존재
    - 해결 : 프로젝션으로 이행적 함수 종속을 제거 => 3NF
- 제 3 정규형(3NF)
    - 정의 : `2NF`이면서 키에 속하지 않는 모든 속성이 기본키에 대해 `이행적 함수종속`이 되지 않음
    - 무손실 분해 : 2NF에서 프로젝션을 통해 3NF가 되고 다시 자연 조인을 통해 1NF로 복귀 가능
    - 적용할 수 없는 경우
        1. 복수의 후보키를 가지고 있고
        2. 후보키들이 두 개 이상의 속성으로 구성되고
        3. 후보 키 들의 속성이 서로 중첩될 때 
    `결정자가 후보키가 아닌 경우`가 발생해 이상이 생김
- 보이스/코드 정규형(BCNF)
    - 정의
        - 결정자가 모두 후보키 이면 BCNF에 속함
        - 강한 제 3 정규형 이라고도 함
