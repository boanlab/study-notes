
# IP는 인터넷층의 프로토콜
- Internet layer는 주로 IP와 ICMP라는 2개의 프로토콜로 구성되어 있다.
- IPv4와 IPv6라는 IP 프로토콜을 사용한다.
## IP는 OSI 참조 모델의 제3층에 해당
- IP는 OSI 참조 모델의 네트워크층에 해당한다.
- 네트워크 층의 역할은 종점 노드간의 통신을 실현하는 것이다.
## 네트워크층과 데이터 링크층의 관계
- 데이터 링크층은 직접 연결된 기기간의 통신을 제공한다.
- 네트워크층인 IP는 직접 연결되어 있지 않은 네트워크 간의 전송을 실현한다.
- 따라서 네트워크층과 데이터링크층이 모두 필요하다.

# IP
- IP의 역할은 크게 IP 주소, 라우팅, IP 패킷의 분할 처리와 재구축 처리로 나눌 수 있다.
## IP 주소는 네트워크층의 주소
- 네트워크층인 IP에서 사용하는 IP 주소는 네트워크에 연결되어 있는 모든 호스트 중에서 통신할 상대를 식별할 때 사용한다.
- TCP/IP에서 통신하는 모든 호스트와 라우터는 반드시 IP 주소가 설정되어야 한다.
- IP 주소의 형식은 데이터 링크의 종류에 구애받지 않는다. 따라서 네트워크층은 데이터 링크층의 성질을 추상화하는 기능이 있다.
## 경로 제어(라우팅)
- 수신처 IP 주소를 가진 호스트까지 패킷을 전달하기 위한 기능이다.
### 최종 수신처의 호스트까지 패킷을 배송하는 과정
  - TCP/IP에서 IP 패킷이 네트워크 1구간을 뛰는 것을 'hop'이라고 하며 이 1구간을 1hop이라고 한다.
  - IP 경로 제어는 'hop by hop 라우팅'이란 방식을 사용한다. 즉, 1홉별로 그 다음 루트가 정해져서 패킷이 전송된다.
  - hop by hop 라우팅에서 라우터나 호스트는 IP 패킷에 다음 전송처가 되는 라우터나 호스트를 지시하는 것이다.
  - 각 홉별로 각각의 라우터가 수신처 IP 패킷을 조사하여 다음 라우터로 IP 패킷의 전송 처리를 하고, 그것을 반복함으로써 최종 수신처의 호스트까지 패킷이 도달하는 것이다.
  - Routing Table : 모든 호스트나 라우터는 수신처 호스트까지 패킷을 보낼 때에 사용하는 경로 제어표(라우팅 테이블) 정보를 가진다. 테이블에는 IP 패킷을 다음에 어떤 라우터에게 보낼지 기록되어 있고 IP 패킷은 이것을 따라 각 링크로 보내진다.
## 데이터 링크의 추상화
- IP는 서로 다른 데이터 링크 사이에서 통신이 가능하게 해주는 프로토콜이다.
- IP는 데이터 링크 각각의 고유한 특징들을 추상화한다.
- 데이터 링크별로 다른 특징 중 하나로 최대 전송 단위(MTU)가 있다.
- 패킷 길이보다 MTU의 값이 작은 경우, 분할 처리(조각화)를 통해 IP 패킷을 여러 개의 작은 패킷으로 분할하여 처리한다. 이 때문에 IP 상위층에서 보면, 중간에 통과하는 데이터 링크의 MTU와 관계없이 원본의 패킷을 전달받을 수 있다.
## IP는 connectionless
- IP는 connectionless이기 때문에 패킷을 송신하기 전에 통신 상대와의 커넥션을 확립하지 않는다.
- 따라서 수신처 호스트의 전원이 꺼져있거나 존재 하지 않는 경우에도 패킷 전송이 가능하고 패킷의 간략화와 전송의 고속화가 가능하다.


# IP 주소 기초 지식
- TCP/IP로 통신할 때, IP 주소를 사용하여 호스트나 라우터를 식별한다.
## IP 주소란
- IP 주소는 32비트의 정수 수치로 나타낸다
- TCP/IP로 통신할 경우 IP 주소를 각각의 호스트에 할당해야 한다.
- IP 주소는 컴퓨터 내부에서 이진수로 처리되는데 사람이 이해하기 쉽도록 32비트의 IP 주소를 8비트씩 4그룹으로 나누어 그 경계에 피리어드(.)을 넣은 후 십진수로 표현할 수 있다.
<img width="300" alt="image" src="https://user-images.githubusercontent.com/110087065/211355118-eccb271c-e068-424e-8cd4-47eddfbbd1c6.png">

- IP 주소로 표현할 수 있는 조합 가능한 수는 2^32개 즉,4,294,967,296개이다.
- IP 주소는 NIC 별로 할당하고, 한 NIC에 여러 개의 IP 주소를 할당할 수 있기 때문에 약 43억개의 IP 주소는 부족하다.
## IP 주소의 네트워크부와 호스트부
- IP 주소는 '네트워크부'와 '호스트부'로 나눌 수 있다.
- '네트워크부'의 값은 데이터 링크의 세그먼트별로 할당된다.
- 동일한 세그먼트로 연결되어 있는 호스트에는 모두 동일한 네트워크 주소를 설정해야 한다.
- IP 주소의 '호스트부'는 동일한 세그먼트 내에서 겹치지 않는 값을 할당한다.
- 이렇게 네트워크와 호스트 주소를 설정하면 연결되어 있는 네트워크 전체에서 동일한 IP 주소를 갖고 있는 컴퓨터는 1대밖에 없도록 설정하여 유니크한 IP 주소를 설정할 수 있다.
- IP 패킷이 중간 라우터로 전송될 때, 수신처 IP 주소의 네트워크부가 이용된다. 호스트부를 보지 않아도 어떤 세그먼트 안에 있느 호스트인지 식별 가능하기 때문이다.
## IP 주소의 클래스
<img width="300" alt="image" src="https://user-images.githubusercontent.com/110087065/211358164-94311701-9ddc-4b17-b5f3-f38bb402107a.png">

- IP 주소 할당 초기에는 IP 주소를 앞에서 4비트씩 끊은 비트열을 조합하여 클래스 A, B, C, D, E라는 5개의 클래스로 분류했다.
## Broadcast address
- 브로드캐스트 주소는 동일한 링크에 연결된 모든 호스트에게 패킷을 송신할 때 사용한다.
- IP 주소의 호스트부 비트를 모드 1로 만들면 브로드캐스트 주소이다.
- 예를 들어, 172.20.0.0/16의 브로드캐스트 주소는 172.20.255.255이다.
### local broadcast
- 자신이 속해 있는 링크 안의 브로드캐스트
### direct broadcast
- 다른 IP 네트워크에 대한 브로드캐스트에는 다이렉트 브로드캐스트 주소를 설정해야 한다.
## IP Multicast
- 멀티캐스트의 기능은 필요로 하는 그룹에게만 패킷을 송신하는 것이다.
### IP Multicast와 주소
- IP 멀티캐스트는 클래스 D의 IP 주소를 사용하기 때문에 맨 앞의 4비트가 1110이면 멀티캐스트 주소로 식별한다.
- 나머지 28비트가 멀티캐스트의 대상이 되는 그룹 번호이다.
- IP 멀티캐스트의 주소로 224.0.0.0부터 239.255.255.255까지 사용 가능하다.
- 224.0.0.0부터 224.0.0.255까지는 경로 제어가 되지 않고 동일한 링크 안에서도 멀티캐스트가 되며, 이외의 주소는 전체 네트워크의 그룹 멤버에게 전달된다.
## 서브넷 마스크
## CIDR과 VLSM
## 글로벌 주소와 프라이빗 주소

# 경로 제어(라우팅)
## IP 주소와 경로 제어(라우팅)
## 경로 제어표의 집약

# IP의 분할 처리와 재구축 처리
## 데이터 링크에 따라 MTU가 다르다.
## IP 데이터그램의 분하 처리와 재구축 처리
## 경로 MTU 탐색

# IPv6
## IPv6가 필요한 이유
## IPv6의 특징
## IPv6에서의 IP 주소 표기 방법
## IPv6 주소의 아키텍처
## 글로벌 유니캐스트 주소
## 링크 로컬 유니캐스트 주소
## 유니크 로컬 주소
## IPv6에서의 분할 처리
<br/>

# IPv4 헤더

# IP 관련 기술
## DNS
## ARP
## ICMP
## DHCP
## NAT
## IP 터널링

