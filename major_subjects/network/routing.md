# 경로 제어(라우팅)란?
## IP주소와 경로 제어
- 패킷을 올바른 수신 호스트에 전달하기 위해서 라우터가 올바른 방향으로 패킷을 전송하기 위한 처리를 '경로 제어' 또는 '라우팅'이라 한다.
## 정적 라우팅과 동적 라우팅
- 경로 제어는 정적 라우팅과 동적 라우팅으로 구분된다.
### 정적 라우팅(Static Routing)
- 라우터나 호스트에 고정적으로 경로 정보를 설정하는 방법
- 정적 라우팅은 100개에 IP 네트워크가 있다면 100개에 경로 정보를 라우터에 직접 입력해야 한다.
- 네트워크가 추가될 때마다 추가된 네트워크의 정보를 모든 라우터에 설정해야 한다.
- 네트워크 장애 발생시 자동으로 장애 지점을 우회하는 제어가 불가능하다.
### 동적 라우팅(Dynamic Routing)
- 라우팅 프로토콜을 작동시켜 자동으로 경로 정보를 설정하는 방법
- 동적 라우팅은 관리자는 라우팅 프로토콜을 설정해야 한다.
- 네트워크가 추가될 경우 네트워크를 추가한 라우터에만 동적 라우팅을 설정하면 된다.
- 네트워크 장애 발생시 패킷은 자동으로 우회로를 통과하도록 설정이 변경된다.


# 경로를 제어하는 범위
## 자율 시스템과 라우팅 프로토콜
### 자율 시스템
- 경로 제어에 관한 규칙을 정하고 이를 바탕으로 운용하는 범위를 '자율 시스템' 또는 '경로 제어 도메인'이라 칭한다.
### 라우팅 프로토콜
- 자율 시스템(라우팅 도메인)의 내부에서 동적 라우팅에 사용되는 것이 도메인 내 라우팅 프로토콜, 즉 EGP이다.
## EGP와 IGP
- 라우팅 프로토콜은 크게 EGP(Exterior Gateway Protocol)와 IGP(Interior Gateway Protocol)로 분류된다.
- EGP에 의해 지역 네트워크나 프로바이더 간 경로 제어를 하고, IGP로 그 지역 네트워크나 프로바이더 내부의 어느 호스트인지를 식별합니다.
- EGP가 없으면 전 세계의 조직과 통신할 수 없고, IGP가 없으면 조직 내부의 통신이 불가능합니다.


# 경로 제어 알고리즘
- 경로 제어 알고리즘의 대표적인 예로 거리 벡터형과 링크 상태형이 존재한다.
## 거리 벡터형
- 거리(메트릭)와 방향에 따라 목적하는 네트워크나 호스트의 위치를 결정하는 방법이다.
- 라우터끼리 네트워크의 방향과 거리에 관한 정보를 교환하는데, 이 방향과 거리의 정보로 경로 제어표를 작성한다.
- 거리 벡터형 알고리즘은 처리가 간단하지만, 거리와 방향 정보밖에 없어 네트워크의 구조가 복잡해지면 경로 제어 정보가 안정될 때까지 시간이 걸리고 경로에 루프가 생기기 쉽다.
## 링크 상태형
- 라우터가 네트워크 전체의 연결 상태를 이해하고 경로 제어표를 작성하는 방법이다.
- 링크 상태형의 경우 네트워크의 구조는 어떤 라우터에게든 동일하기 때문에 모든 라우터가 동일한 정보를 갖게 됩니다.
- 따라서 다른 라우터와 동일한 경로 제어 정보를 가지면 올바른 정보를 갖고 있다고 간주한다.
- 링크 상태형 알고리즘은 안정된 경로 제어를 할 수 있지만, 네트워크 토폴로지로부터 경로 제어표를 구하는 계산이 매우 복잡하다. 네트워크가 거대하고 복잡한 구조인 경우, 토폴로지 정보 처리 및 관리를 위해 높은 성능을 필요로 한다.


# RIP(Routing Information Protocol)
- RIP는 거리 벡터형 라우팅 프로토콜로, LAN에서 사용된다.
## 경로 제어 정보를 브로드캐스트한다
- RIP는 경로 제어 정보를 30초 주기마다 정기적으로 네트워크상에 브로드캐스트한다.
- 6번(180초) 주기로 패킷이 오지 않는 경우 연결이 끊어졌다 간주한다.
## 거리 벡터에 의한 경로 결정
- RIP는 거리 벡터에 의해 경로를 결정한다.
- RIP에서는 가능한 적은 수의 라우터르 통과하는 목적으로 IP주소에 도달하도록 제어한다.
## 서브넷 마스크를 이용한 경우의 RIP 처리
- RIP를 서브넷 마스크를 사용하는 네트워크에서도 이용할 수 있다.
- 인터페이스에 부여된 IP 주소르 이용하여 클래스로 판단한 네트워크 주소를 구하고, 경로 제어 정보로 흘러온 주소를 이용하여 클래스로 판단한 네트워크 주소를 구해, 양쪽이 동일한 네트워크 주소인 경우 인터페이스에 부여되어 있는 네트워크 주소의 길이와 똑같은 것으로 간주한다.
- 다른 경우에는 해당 IP 주소를 클래스로 판단한 네트워크 주소로 취급한다.
## RIP로 경로가 변경될 때의 처리
- RIP의 기본적인 동작
  - 자신이 알고 있는 경로 제어 정보를 정기적으로 브로드캐스트한다.
  - 네트워크가 끊어졌다고 판단한 경우에는 해당 정보가 흐르지 않기 때문에 다른 라우터는 네트워크가 끊어졌다고 알게 된다.
- EX)
  - 상황: 라우터 A는 B에게 연결 정보를 보내고 B는 알게된 연결 정보에 1을 더해 C에게 보낸다. 이때 네트워크 A와 연결이 끊어졌다.
  - 라우터 A는 네트워크 A와 연결이 끊어진 것을 이해하고 네트워크 A의 정보를 라우터 B에게 보내지 않지만, 라우터 B는 과거에 정보를 계속 흘려보낸다.
  - 그러면 라우터 A는 라우터 B로 부터 받은 정보를 가지고 라우터 B를 경유하여 네트워크 A에 도착할 수 있다고 착각하여 경로 제어 정보를 갱신한다.
  - 이렇게 과거에 전달한 정보를 역으로 전달받아 그것을 서로 전달해버리는 문제를 무한 카운트라고 한다.
    1. 무한 카운트를 해결하기 위해 거리 16을 통신 불가능으로 간주하여 무한 카운트가 발생하더라도 시간을 줄인다.
    2. 경로 정보를 가르쳐준 인터페이스에게는 가르쳐준 경로 정보를 다시보내지 않는 스플릿 호리즌을 사용한다.
  
  
# OSPF(Open Shortest Path First)
## OSPF는 링크 상태형 라우팅 프로토콜
## OSPF의 기초 지식
## OSPF의 동작 개요

# BGP(Border Gateway Protocol)
## BGP와 AS 번호
## BGP는 경로 벡터
## isis

# MPLS(Multi Protocol Label Switching)
## MPLS 네트워크의 동작
## MPLS의 장점


